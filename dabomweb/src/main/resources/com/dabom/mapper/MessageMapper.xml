<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
				 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
				 
<mapper namespace="com.dabom.mapper.MessageMapper">
	
	<select id="selectAllMessage" resultType="Message">
		SELECT message_no, message_title, message_content, send_date, sender, receiver, message_delete 
		FROM message 
		ORDER BY send_date DESC
	</select>	
	
	<select id="selectMessageCount" resultType="int">
		SELECT COUNT(*) FROM message
	</select>

	<insert id="insertMessage" parameterType="Message">
		<selectKey keyProperty="messageNo" resultType="int" order="AFTER">
			SELECT LAST_INSERT_ID()		
		</selectKey>		
		INSERT INTO message (message_title, receiver, sender, message_content)
		VALUES ( #{message_Title}, #{receiver}, #{sender}, #{message_Content} )
		<!-- VALUES ('dd', 'dd', 'fffffffffffffffffffff') -->	 
		
	</insert>	
	
	<select id="selectReceiver" resultType="Member">
		SELECT memberid	FROM member		
	</select>
	
	<select id="selectByMessageNo" parameterType="int" resultType="Message">
		SELECT message_no, message_title, message_content, send_date, sender, receiver, message_delete 
		FROM message 
		WHERE message_no = #{message_No}
	</select>
</mapper>
 				 