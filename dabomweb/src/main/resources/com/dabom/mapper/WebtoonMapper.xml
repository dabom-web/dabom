<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.dabom.mapper.WebtoonMapper">
  
  	<insert id="insertWebtoonBoard" parameterType="WebtoonBoard">
  		<selectKey keyProperty="boardNo" resultType="int" order="AFTER"> SELECT LAST_INSERT_ID()</selectKey>
	  	INSERT INTO webtoon_board (title, memberid)
	  	VALUES(#{title}, #{memberId})
  	
  	</insert>
  	<insert id="insertWebtoonBoardAttach" parameterType="WebtoonBoardAttach">
  		<selectKey keyProperty="attachNo" resultType="int" order="AFTER">SELECT LAST_INSERT_ID()</selectKey>
  		INSERT webtoon_boardattach (boardno, userfilename, savedfilename)
  		VALUES (#{boardNo}, #{userFileName}, #{savedFileName})
  	</insert>
  
  	<select id="selectAll" resultType="WebtoonBoard">
  		SELECT boardno, title, memberid, readcount, regdate, deleted
  		FROM webtoon_board
  		ORDER BY boardno DESC
  	
  	</select>
  	
  	<select id="selectByRange" parameterType="hashmap" resultType="WebtoonBoard">
		SELECT boardno, title, memberid, readcount, regdate, deleted
		FROM webtoon_board
		ORDER BY boardno DESC
		LIMIT #{from}, #{count}
	</select>
  	
  	<select id="selectBoardCount" resultType="int">
		SELECT COUNT(*) FROM webtoon_board
	</select>
  	
  
  </mapper>